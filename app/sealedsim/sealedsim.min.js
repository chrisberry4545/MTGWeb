(function(){"use strict";function t(t,i,r,u,f,e){function p(){i.getCardSetGroups().then(function(n){n[0][0].boostersToOpen=6;o.setGroups=n})}function a(n,t,i){var r=n.indexOf(i);r>-1&&n.splice(r,1);t.push(i)}function c(){u.resetAllCanvas();u.setPieChartGraphElement("colorPieChartContainer-cardPool",s,h);u.setBarChartGraphElement("manaCurveBarChartContainer-cardPool",s,h);u.setTypeChartHolder("typePieChartContainer-cardPool",s,h);u.displayChartsForCards(o.boosterCards);u.setPieChartGraphElement("colorPieChartContainer-selectedCards",s,h);u.setBarChartGraphElement("manaCurveBarChartContainer-selectedCards",s,h);u.setTypeChartHolder("typePieChartContainer-selectedCards",s,h);u.displayChartsForCards(o.selectedCards)}function w(){t.activateController([p()],n).then(function(){o.landcards=f.getLandCards();c();trackEvent(n,"init")})}var v=t.logger.getLogFn,l=v(n),y=t.logger.getLogFn(n,"success"),b=t.logger.getLogFn(n,"error"),s=200,h=200,o=this;o.title="Sealed Simulator";o.landcards=[];o.selectedLandCards=[];o.showExtraOptions=!1;o.displayExtraOptions=function(){o.showExtraOptions?(o.showExtraOptions=!1,trackEvent(n,"hide-extra-options")):(o.showExtraOptions=!0,trackEvent(n,"show-extra-options"))};o.setGroups=[];o.chartsHidden=!1;o.hideCharts=function(){o.chartsHidden=!o.chartsHidden};o.include_promo="1";o.boosterCards=[];o.selectedCards=[];o.saveSelection=function(){r.saveCardsList(o.selectedCards.concat(o.selectedLandCards),"sealedselection");trackEvent(n,"save-selected-cards")};o.saveCardsInBooster=function(){r.saveCardsList(o.boosterCards,"cardsRemainingInPool");trackEvent(n,"save-booster-cards")};o.saveCompletePool=function(){r.saveCardsList(o.selectedCards.concat(o.boosterCards),"sealedPool");trackEvent(n,"save-complete-pool")};o.addLandCard=function(t){o.selectedLandCards.push(t);trackEvent(n,"add-land-card",t.Name)};o.removeLandCard=function(t){var i=o.selectedLandCards.indexOf(t);i>-1&&(o.selectedLandCards.splice(i,1),trackEvent(n,"remove-land-card",t.Name))};o.addToDeck=function(t){y("Added "+t.Name+" to your selection...");a(o.boosterCards,o.selectedCards,t);c();trackEvent(n,"add-to-deck",t.Name)};o.removeFromDeck=function(t){l("Put "+t.Name+" back into sealed pool...");a(o.selectedCards,o.boosterCards,t);c();trackEvent(n,"remove-from-deck",t.Name)};o.clearSelection=function(){var t=confirm("Are you sure you want to clear your selection?"),n;if(t){for(n=0;n<o.selectedCards.length;n++)o.boosterCards.push(o.selectedCards[n]);o.selectedCards=[];o.selectedLandCards=[]}};o.openHandSimulator=function(){var t=o.selectedCards.concat(o.selectedLandCards),i;t.length>0?i=e.open({templateUrl:"handmodal.html",controller:"handmodal",resolve:{fullDeck:function(){return t}}}):l("Please add some cards to your deck (click on them above).");trackEvent(n,"opened-hand-simulator")};o.openBoosters=function(){o.boosterCards=[];var t=i.openBoostersForCardSetGroups(o.setGroups);o.boosterCards.push.apply(o.boosterCards,t.mythicCards);o.boosterCards.push.apply(o.boosterCards,t.rareCards);o.boosterCards.push.apply(o.boosterCards,t.uncommonCards);o.boosterCards.push.apply(o.boosterCards,t.commonCards);o.include_promo=="1"?(i.addPromoForLatestSet(o.boosterCards),trackEvent(n,"include-promo")):trackEvent(n,"exclude-promo");return};w()}var n="sealedsim";angular.module("app").controller(n,["common","datacontext","downloadDataService","graphAnalysis","landcards","$modal","$scope",t])})();
//# sourceMappingURL=sealedsim.min.js.map
