(function(){"use strict";function t(t,i,r,u,f,e){function a(n,t,i){var r=n.indexOf(i);r>-1&&n.splice(r,1);t.push(i)}function p(){return o.boosters_to_open_core==null||o.boosters_to_open_ths==null||o.boosters_to_open_bng==null||o.boosters_to_open_jou==null||o.boosters_to_open_ktk==null?(l("Please use a number for the amount of boosters."),!1):!0}function w(){t.activateController([],n).then(function(){o.landcards=f.getLandCards()})}var v=t.logger.getLogFn,c=v(n),y=t.logger.getLogFn(n,"success"),l=t.logger.getLogFn(n,"error"),s=200,h=200,o=this;o.title="Sealed Simulator";o.boosters_to_open_ktk=6;o.boosters_to_open_core=0;o.boosters_to_open_jou=0;o.boosters_to_open_bng=0;o.boosters_to_open_ths=0;o.landcards=[];o.selectedLandCards=[];o.showOldSets=!1;o.includeOlderSets=function(){o.showOldSets=o.showOldSets?!1:!0};o.include_seeded_boosters="W";o.include_seeded_boosters_options=[{key:"W",value:"Abzan Houses"},{key:"U",value:"Jeskai Way"},{key:"B",value:"Sultai Brood"},{key:"R",value:"Mardu Horde"},{key:"G",value:"Temur Frontier"},{key:"0",value:"Don't use Seeded"}];o.boosterCards=[];o.selectedCards=[];o.saveSelection=function(){r.saveCardsList(o.selectedCards.concat(o.selectedLandCards),"sealedselection")};o.saveCardsInBooster=function(){r.saveCardsList(o.boosterCards,"cardsRemainingInPool")};o.saveCompletePool=function(){r.saveCardsList(o.selectedCards.concat(o.boosterCards),"sealedPool")};o.addLandCard=function(n){o.selectedLandCards.push(n)};o.removeLandCard=function(n){var t=o.selectedLandCards.indexOf(n);t>-1&&o.selectedLandCards.splice(t,1)};o.addToDeck=function(n){y("Added "+n.Name+" to your selection...");a(o.boosterCards,o.selectedCards,n);u.displayChartsForCards(o.selectedCards)};o.removeFromDeck=function(n){c("Put "+n.Name+" back into sealed pool...");a(o.selectedCards,o.boosterCards,n);u.displayChartsForCards(o.selectedCards)};o.openHandSimulator=function(){var n=o.selectedCards.concat(o.selectedLandCards),t;n.length>0?t=e.open({templateUrl:"handmodal.html",controller:"handmodal",resolve:{fullDeck:function(){return n}}}):c("Please add some cards to your deck (click on them above).")};o.openBoosters=function(){if(!p())return!1;if(o.include_seeded_boosters!="0"){if(o.boosters_to_open_ktk>0)return i.openMixtureOfSeededBoosters(parseInt(o.boosters_to_open_ths),parseInt(o.boosters_to_open_bng),parseInt(o.boosters_to_open_jou),parseInt(o.boosters_to_open_core),parseInt(o.boosters_to_open_ktk),o.include_seeded_boosters).then(function(n){return o.boosterCards=[],o.selectedCards=[],o.boosterCards.push.apply(o.boosterCards,n.mythicCards),o.boosterCards.push.apply(o.boosterCards,n.rareCards),o.boosterCards.push.apply(o.boosterCards,n.uncommonCards),o.boosterCards.push.apply(o.boosterCards,n.commonCards),u.resetAllCanvas(),u.setPieChartGraphElement("colorPieChartContainer-cardPool",s,h),u.setBarChartGraphElement("manaCurveBarChartContainer-cardPool",s,h),u.setTypeChartHolder("typePieChartContainer-cardPool",s,h),u.displayChartsForCards(o.boosterCards),u.setPieChartGraphElement("colorPieChartContainer-selectedCards",s,h),u.setBarChartGraphElement("manaCurveBarChartContainer-selectedCards",s,h),u.setTypeChartHolder("typePieChartContainer-selectedCards",s,h),o.boosterCards});l("You must include at least one booster of the latest set to include a seeded booster.")}else return i.openMixtureOfSortedBoosters(parseInt(o.boosters_to_open_ths),parseInt(o.boosters_to_open_bng),parseInt(o.boosters_to_open_jou),parseInt(o.boosters_to_open_core),parseInt(o.boosters_to_open_ktk)).then(function(n){return o.boosterCards=[],o.selectedCards=[],o.boosterCards.push.apply(o.boosterCards,n.mythicCards),o.boosterCards.push.apply(o.boosterCards,n.rareCards),o.boosterCards.push.apply(o.boosterCards,n.uncommonCards),o.boosterCards.push.apply(o.boosterCards,n.commonCards),u.setPieChartGraphElement("colorPieChartContainer-cardPool",s,h),u.setBarChartGraphElement("manaCurveBarChartContainer-cardPool",s,h),u.setTypeChartHolder("typePieChartContainer-cardPool",s,h),u.displayChartsForCards(o.boosterCards),u.setPieChartGraphElement("colorPieChartContainer-selectedCards",s,h),u.setBarChartGraphElement("manaCurveBarChartContainer-selectedCards",s,h),u.setTypeChartHolder("typePieChartContainer-selectedCards",s,h),o.boosterCards})};w()}var n="sealedsim";angular.module("app").controller(n,["common","datacontext","downloadDataService","graphAnalysis","landcards","$modal",t])})();
/*
//# sourceMappingURL=sealedsim.min.js.map
*/