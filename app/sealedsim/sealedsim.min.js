(function(){"use strict";function t(t,i,r,u,f,e){function l(n,t,i){var r=n.indexOf(i);r>-1&&n.splice(r,1);t.push(i)}function p(){return o.boosters_to_open_core==null||o.boosters_to_open_ths==null||o.boosters_to_open_bng==null||o.boosters_to_open_jou==null||o.boosters_to_open_ktk==null||o.boosters_to_open_frf==null||o.boosters_to_open_dtk==null?(y("Please use a number for the amount of boosters."),!1):!0}function w(){t.activateController([],n).then(function(){o.landcards=f.getLandCards();u.setPieChartGraphElement("colorPieChartContainer",s,h);u.setBarChartGraphElement("manaCurveBarChartContainer",s,h);u.setTypeChartHolder("typePieChartContainer",s,h);u.resetAllCanvas()})}var a=t.logger.getLogFn,c=a(n),v=t.logger.getLogFn(n,"success"),y=t.logger.getLogFn(n,"error"),s=200,h=200,o=this;o.title="Sealed Simulator";o.boosters_to_open_dtk=3;o.boosters_to_open_frf=2;o.boosters_to_open_ktk=0;o.boosters_to_open_core=0;o.boosters_to_open_jou=0;o.boosters_to_open_bng=0;o.boosters_to_open_ths=0;o.landcards=[];o.selectedLandCards=[];o.showOldSets=!1;o.includeOlderSets=function(){o.showOldSets=o.showOldSets?!1:!0};o.chartsHidden=!1;o.hideCharts=function(){o.chartsHidden=!o.chartsHidden};o.include_seeded_boosters="W";o.include_seeded_boosters_options=[{key:"W",value:"Dromoka - White/Green"},{key:"U",value:"Ojutai - Blue/White"},{key:"B",value:"Silumgar - Black/Blue"},{key:"R",value:"Kolaghan - Red/Black"},{key:"G",value:"Atarka - Green/Red"},{key:"0",value:"Don't use Seeded"}];o.boosterCards=[];o.selectedCards=[];o.saveSelection=function(){r.saveCardsList(o.selectedCards.concat(o.selectedLandCards),"sealedselection")};o.saveCardsInBooster=function(){r.saveCardsList(o.boosterCards,"cardsRemainingInPool")};o.saveCompletePool=function(){r.saveCardsList(o.selectedCards.concat(o.boosterCards),"sealedPool")};o.addLandCard=function(n){o.selectedLandCards.push(n)};o.removeLandCard=function(n){var t=o.selectedLandCards.indexOf(n);t>-1&&o.selectedLandCards.splice(t,1)};o.addToDeck=function(n){v("Added "+n.Name+" to your selection...");l(o.boosterCards,o.selectedCards,n);u.displayChartsForCards(o.selectedCards)};o.removeFromDeck=function(n){c("Put "+n.Name+" back into sealed pool...");l(o.selectedCards,o.boosterCards,n);u.displayChartsForCards(o.selectedCards)};o.openHandSimulator=function(){var n=o.selectedCards.concat(o.selectedLandCards),t;n.length>0?t=e.open({templateUrl:"handmodal.html",controller:"handmodal",resolve:{fullDeck:function(){return n}}}):c("Please add some cards to your deck (click on them above).")};o.openBoosters=function(){return p()?o.include_seeded_boosters!="0"?i.openMixtureOfSeededBoosters(parseInt(o.boosters_to_open_ths),parseInt(o.boosters_to_open_bng),parseInt(o.boosters_to_open_jou),parseInt(o.boosters_to_open_core),parseInt(o.boosters_to_open_ktk),parseInt(o.boosters_to_open_frf),parseInt(o.boosters_to_open_dtk),o.include_seeded_boosters).then(function(n){return o.boosterCards=[],o.selectedCards=[],o.selectedLandCards=[],o.boosterCards.push.apply(o.boosterCards,n.mythicCards),o.boosterCards.push.apply(o.boosterCards,n.rareCards),o.boosterCards.push.apply(o.boosterCards,n.uncommonCards),o.boosterCards.push.apply(o.boosterCards,n.commonCards),u.resetAllCanvas(),u.setPieChartGraphElement("colorPieChartContainer-cardPool",s,h),u.setBarChartGraphElement("manaCurveBarChartContainer-cardPool",s,h),u.setTypeChartHolder("typePieChartContainer-cardPool",s,h),u.displayChartsForCards(o.boosterCards),u.setPieChartGraphElement("colorPieChartContainer-selectedCards",s,h),u.setBarChartGraphElement("manaCurveBarChartContainer-selectedCards",s,h),u.setTypeChartHolder("typePieChartContainer-selectedCards",s,h),o.boosterCards}):i.openMixtureOfSortedBoosters(parseInt(o.boosters_to_open_ths),parseInt(o.boosters_to_open_bng),parseInt(o.boosters_to_open_jou),parseInt(o.boosters_to_open_core),parseInt(o.boosters_to_open_ktk),parseInt(o.boosters_to_open_frf),parseInt(o.boosters_to_open_dtk)).then(function(n){return o.boosterCards=[],o.selectedCards=[],o.boosterCards.push.apply(o.boosterCards,n.mythicCards),o.boosterCards.push.apply(o.boosterCards,n.rareCards),o.boosterCards.push.apply(o.boosterCards,n.uncommonCards),o.boosterCards.push.apply(o.boosterCards,n.commonCards),u.setPieChartGraphElement("colorPieChartContainer-cardPool",s,h),u.setBarChartGraphElement("manaCurveBarChartContainer-cardPool",s,h),u.setTypeChartHolder("typePieChartContainer-cardPool",s,h),u.displayChartsForCards(o.boosterCards),u.setPieChartGraphElement("colorPieChartContainer-selectedCards",s,h),u.setBarChartGraphElement("manaCurveBarChartContainer-selectedCards",s,h),u.setTypeChartHolder("typePieChartContainer-selectedCards",s,h),o.boosterCards}):!1};w()}var n="sealedsim";angular.module("app").controller(n,["common","datacontext","downloadDataService","graphAnalysis","landcards","$modal",t])})();
//# sourceMappingURL=sealedsim.min.js.map
