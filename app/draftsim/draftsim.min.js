(function(){"use strict";function t(t,i,r,u,f){function s(n,t,i){var r=n.indexOf(i);r>-1&&n.splice(r,1);t.push(i)}function p(){t.activateController([],n).then(function(){e.landcards=f.getLandCards();var n=200,t=200;u.setPieChartGraphElement("colorPieChartContainer",n,t);u.setBarChartGraphElement("manaCurveBarChartContainer",n,t);u.setTypeChartHolder("typePieChartContainer",n,t)})}function w(){return e.boosters_to_open_core==null||e.boosters_to_open_ths==null||e.boosters_to_open_bng==null||e.boosters_to_open_jou==null||e.boosters_to_open_ktk==null?(y("Please use a number for the amount of boosters."),!1):!0}function b(){for(var t,n=1;n<e.AIs.length;n++)processTurn(e.AIs[n]);for(t=[],n=0;n<e.AIs.length;n++)t.push(e.AIs[n].boosterCards);for(e.AIs[0].boosterCards=t[e.AIs.length-1],e.boosterCards=e.AIs[0].boosterCards,n=1;n<e.AIs.length;n++)e.AIs[n].boosterCards=t[n-1]}function k(){var n,t;for(e.AIs=[],n=0;n<e.numberOfPlayers;n++)t=new ai(n),l(t),e.AIs.push(t)}function l(n){return e.packsOpened<=e.fixedKTKPacks?i.openMixtureOfSortedBoosters(0,0,0,0,1).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards}):e.packsOpened<=e.fixedCorePacks+e.fixedKTKPacks?i.openMixtureOfSortedBoosters(0,0,0,1,0).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards}):e.packsOpened<=e.fixedJOUpacks+e.fixedCorePacks+e.fixedKTKPacks?i.openMixtureOfSortedBoosters(0,0,1,0,0).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards}):e.packsOpened<=e.fixedBNGpacks+e.fixedJOUpacks+e.fixedCorePacks+e.fixedKTKPacks?i.openSortedBoosters(1).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards}):i.openMixtureOfSortedBoosters(1,0,0,0,0).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards})}var a=t.logger.getLogFn,o=a(n),v=t.logger.getLogFn(n,"success"),y=t.logger.getLogFn(n,"error"),e=this,h,c;e.title="Sealed Simulator";e.column1Title="Image";e.column2Title="Name";e.column3Title="Rarity";e.boosters_to_open=1;e.boosters_to_open_ktk=3;e.boosters_to_open_core=0;e.boosters_to_open_jou=0;e.boosters_to_open_bng=0;e.boosters_to_open_ths=0;e.boosterCards=[];e.selectedCards=[];e.deckCards=[];e.draftFinished=!1;e.draftStarted=!1;e.packsOpened=0;e.totalPacksToOpen=3;e.fixedKTKPacks=0;e.fixedCorePacks=0;e.fixedJOUpacks=0;e.fixedBNGpacks=0;e.fixedTHSpacks=0;e.landcards=[];e.selectedLandCards=[];h="Booster Cards";e.topPanelCardsTitle=h;c="Selected Cards Stats";e.cardStatsTitle=c;e.showExtraOptions=!1;e.displayExtraOptions=function(){e.showExtraOptions=e.showExtraOptions?!1:!0};e.downloadFullPool=function(){r.saveCardsList(e.selectedCards.concat(e.deckCards),"MyDraftPool")};e.downloadDraftDeck=function(){r.saveCardsList(e.deckCards.concat(e.selectedLandCards),"MyDeckSelection")};e.addToDeck=function(n){s(e.boosterCards,e.selectedCards,n);v("You've chosen "+n.Name+"!");b();e.boosterCards.length==0&&(e.packsOpened<e.totalPacksToOpen?e.openNextPack():(e.draftFinished=!0,e.topPanelCardsTitle="Deck Cards"));u.displayChartsForCards(e.selectedCards)};e.cardPoolClick=function(n){e.draftFinished&&(s(e.selectedCards,e.deckCards,n),e.cardStatsTitle="My Deck Stats",u.displayChartsForCards(e.deckCards))};e.deckCardClick=function(n){e.draftFinished&&(s(e.deckCards,e.selectedCards,n),u.displayChartsForCards(e.deckCards))};e.landCardClick=function(n){e.draftFinished&&e.selectedLandCards.push(n)};e.removeLandCard=function(n){var t=e.selectedLandCards.indexOf(n);t>-1&&e.selectedLandCards.splice(t,1)};e.removeFromDeck=function(n){s(e.selectedCards,e.boosterCards,n)};e.openBoosters=function(){return i.openSortedBoosters(e.boosters_to_open).then(function(n){return o("Opened "+e.boosters_to_open+" booster packs."),e.boosterCards.push.apply(e.boosterCards,n.mythicCards),e.boosterCards.push.apply(e.boosterCards,n.rareCards),e.boosterCards.push.apply(e.boosterCards,n.uncommonCards),e.boosterCards.push.apply(e.boosterCards,n.commonCards),e.boosterCards})};e.openNextPack=function(){o("Opening a new pack...");e.packsOpened++;for(var n=0;n<e.numberOfPlayers;n++)l(e.AIs[n]);e.boosterCards=e.AIs[0].boosterCards;o("Packs opened: "+e.packsOpened+" Total packs to open: "+e.totalPacksToOpen)};p();e.numberOfPlayers=8;e.AIs=[];e.startDraft=function(){if(!w())return!1;e.draftStarted=!0;e.draftFinished=!1;e.topPanelCardsTitle=h;e.cardStatsTitle=c;u.resetAllCanvas();e.boosterCards=[];e.selectedCards=[];e.deckCards=[];e.selectedLandCards=[];e.fixedKTKPacks=parseInt(e.boosters_to_open_ktk);e.fixedCorePacks=parseInt(e.boosters_to_open_core);e.fixedBNGpacks=parseInt(e.boosters_to_open_bng);e.fixedTHSpacks=parseInt(e.boosters_to_open_ths);e.fixedJOUpacks=parseInt(e.boosters_to_open_jou);e.totalPacksToOpen=e.fixedBNGpacks+e.fixedTHSpacks+e.fixedJOUpacks+e.fixedCorePacks+e.fixedKTKPacks;e.packsOpened=1;k();e.boosterCards=e.AIs[0].boosterCards;o("You've started a new draft")}}var n="draftsim";angular.module("app").controller(n,["common","datacontext","downloadDataService","graphAnalysis","landcards",t])})();
/*
//# sourceMappingURL=draftsim.min.js.map
*/