(function(){"use strict";function t(t,i,r,u,f,e){function h(n,t,i){var r=n.indexOf(i);r>-1&&n.splice(r,1);t.push(i)}function w(){t.activateController([],n).then(function(){o.landcards=f.getLandCards();var n=200,t=200;u.setPieChartGraphElement("colorPieChartContainer",n,t);u.setBarChartGraphElement("manaCurveBarChartContainer",n,t);u.setTypeChartHolder("typePieChartContainer",n,t)})}function b(){return o.boosters_to_open_core==null||o.boosters_to_open_ths==null||o.boosters_to_open_bng==null||o.boosters_to_open_jou==null||o.boosters_to_open_ktk==null?(p("Please use a number for the amount of boosters."),!1):!0}function k(){for(var t,n=1;n<o.AIs.length;n++)processTurn(o.AIs[n]);for(t=[],n=0;n<o.AIs.length;n++)t.push(o.AIs[n].boosterCards);for(o.AIs[0].boosterCards=t[o.AIs.length-1],o.boosterCards=o.AIs[0].boosterCards,n=1;n<o.AIs.length;n++)o.AIs[n].boosterCards=t[n-1]}function d(){var n,t;for(o.AIs=[],n=0;n<o.numberOfPlayers;n++)t=new ai(n),a(t),o.AIs.push(t)}function a(n){return o.packsOpened<=o.fixedKTKPacks?i.openMixtureOfSortedBoosters(0,0,0,0,1).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards}):o.packsOpened<=o.fixedCorePacks+o.fixedKTKPacks?i.openMixtureOfSortedBoosters(0,0,0,1,0).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards}):o.packsOpened<=o.fixedJOUpacks+o.fixedCorePacks+o.fixedKTKPacks?i.openMixtureOfSortedBoosters(0,0,1,0,0).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards}):o.packsOpened<=o.fixedBNGpacks+o.fixedJOUpacks+o.fixedCorePacks+o.fixedKTKPacks?i.openSortedBoosters(1).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards}):i.openMixtureOfSortedBoosters(1,0,0,0,0).then(function(t){return n.boosterCards.push.apply(n.boosterCards,t.mythicCards),n.boosterCards.push.apply(n.boosterCards,t.rareCards),n.boosterCards.push.apply(n.boosterCards,t.uncommonCards),n.boosterCards.push.apply(n.boosterCards,t.commonCards),n.boosterCards})}var v=t.logger.getLogFn,s=v(n),y=t.logger.getLogFn(n,"success"),p=t.logger.getLogFn(n,"error"),o=this,c,l;o.title="Sealed Simulator";o.column1Title="Image";o.column2Title="Name";o.column3Title="Rarity";o.boosters_to_open=1;o.boosters_to_open_ktk=3;o.boosters_to_open_core=0;o.boosters_to_open_jou=0;o.boosters_to_open_bng=0;o.boosters_to_open_ths=0;o.boosterCards=[];o.selectedCards=[];o.deckCards=[];o.draftFinished=!1;o.draftStarted=!1;o.packsOpened=0;o.totalPacksToOpen=3;o.fixedKTKPacks=0;o.fixedCorePacks=0;o.fixedJOUpacks=0;o.fixedBNGpacks=0;o.fixedTHSpacks=0;o.landcards=[];o.selectedLandCards=[];c="Booster Cards";o.topPanelCardsTitle=c;l="Selected Cards Stats";o.cardStatsTitle=l;o.showExtraOptions=!1;o.displayExtraOptions=function(){o.showExtraOptions=o.showExtraOptions?!1:!0};o.downloadFullPool=function(){r.saveCardsList(o.selectedCards.concat(o.deckCards),"MyDraftPool")};o.downloadDraftDeck=function(){r.saveCardsList(o.deckCards.concat(o.selectedLandCards),"MyDeckSelection")};o.addToDeck=function(n){h(o.boosterCards,o.selectedCards,n);y("You've chosen "+n.Name+"!");k();o.boosterCards.length==0&&(o.packsOpened<o.totalPacksToOpen?o.openNextPack():(o.draftFinished=!0,o.topPanelCardsTitle="Deck Cards"));u.displayChartsForCards(o.selectedCards)};o.cardPoolClick=function(n){o.draftFinished&&(h(o.selectedCards,o.deckCards,n),o.cardStatsTitle="My Deck Stats",u.displayChartsForCards(o.deckCards))};o.deckCardClick=function(n){o.draftFinished&&(h(o.deckCards,o.selectedCards,n),u.displayChartsForCards(o.deckCards))};o.landCardClick=function(n){o.draftFinished&&o.selectedLandCards.push(n)};o.removeLandCard=function(n){var t=o.selectedLandCards.indexOf(n);t>-1&&o.selectedLandCards.splice(t,1)};o.removeFromDeck=function(n){h(o.selectedCards,o.boosterCards,n)};o.openBoosters=function(){return i.openSortedBoosters(o.boosters_to_open).then(function(n){return s("Opened "+o.boosters_to_open+" booster packs."),o.boosterCards.push.apply(o.boosterCards,n.mythicCards),o.boosterCards.push.apply(o.boosterCards,n.rareCards),o.boosterCards.push.apply(o.boosterCards,n.uncommonCards),o.boosterCards.push.apply(o.boosterCards,n.commonCards),o.boosterCards})};o.openNextPack=function(){s("Opening a new pack...");o.packsOpened++;for(var n=0;n<o.numberOfPlayers;n++)a(o.AIs[n]);o.boosterCards=o.AIs[0].boosterCards;s("Packs opened: "+o.packsOpened+" Total packs to open: "+o.totalPacksToOpen)};w();o.numberOfPlayers=8;o.AIs=[];o.startDraft=function(){if(!b())return!1;o.draftStarted=!0;o.draftFinished=!1;o.topPanelCardsTitle=c;o.cardStatsTitle=l;u.resetAllCanvas();o.boosterCards=[];o.selectedCards=[];o.deckCards=[];o.selectedLandCards=[];o.fixedKTKPacks=parseInt(o.boosters_to_open_ktk);o.fixedCorePacks=parseInt(o.boosters_to_open_core);o.fixedBNGpacks=parseInt(o.boosters_to_open_bng);o.fixedTHSpacks=parseInt(o.boosters_to_open_ths);o.fixedJOUpacks=parseInt(o.boosters_to_open_jou);o.totalPacksToOpen=o.fixedBNGpacks+o.fixedTHSpacks+o.fixedJOUpacks+o.fixedCorePacks+o.fixedKTKPacks;o.packsOpened=1;d();o.boosterCards=o.AIs[0].boosterCards;s("You've started a new draft")};o.openHandSimulator=function(){var n=o.deckCards.concat(o.selectedLandCards),t;n.length>0?t=e.open({templateUrl:"handmodal.html",controller:"handmodal",resolve:{fullDeck:function(){return n}}}):s("Please add some cards to your deck (click on them below).")}}var n="draftsim";angular.module("app").controller(n,["common","datacontext","downloadDataService","graphAnalysis","landcards","$modal",t])})();
/*
//# sourceMappingURL=draftsim.min.js.map
*/