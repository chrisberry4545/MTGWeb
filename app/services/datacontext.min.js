(function(){"use strict";function n(n,t){function rt(){return-1}function ft(n){this.Name=n.Name;this.Cost=n.Cost;this.Color=n.Color;this.Rarity=n.Rarity;this.Type=n.Type;this.Rating=n.Rating;this.Sort=n.Sort;this.Set=n.Set;this.Number=n.Number;this.Image=n.Image}function et(n){v=n}function ot(){return v}function st(n){return i.when(l(n))}function ht(n,t,u,f,e,o,s,h,c,l){var v=y(n,t,u,f,e,o,s,h,c-1,0),a=p(1,l);return a.rareCards.sort(r),a.uncommonCards.sort(r),a.commonCards.sort(r),a.mythicCards.push.apply(a.mythicCards,v.mythicCards),a.rareCards.push.apply(a.rareCards,v.rareCards),a.uncommonCards.push.apply(a.uncommonCards,v.uncommonCards),a.commonCards.push.apply(a.commonCards,v.commonCards),i.when(a)}function ct(n,t,r,u,f,e,o,s,h){var c=y(n,t,r,u,f,e,o,s,h);return i.when(c)}function y(n,t,i,r,f,e,s,h,c){var a=l(t),v,y,p,w,b,k,d,g;return u(a),v=vt(n),u(v),y=at(i),u(y),p=yt(r),u(p),w=pt(f),u(w),b=wt(e),u(b),k=bt(s),u(k),d=dt(h),u(d),g=kt(c),u(g),o(a,v),o(a,y),o(a,p),o(a,w),o(a,b),o(a,k),o(a,d),o(a,g),a}function u(n){n.mythicCards.sort(r);n.rareCards.sort(r);n.uncommonCards.sort(r);n.commonCards.sort(r)}function o(n,t){n.mythicCards.push.apply(n.mythicCards,t.mythicCards);n.rareCards.push.apply(n.rareCards,t.rareCards);n.uncommonCards.push.apply(n.uncommonCards,t.uncommonCards);n.commonCards.push.apply(n.commonCards,t.commonCards)}function lt(n){var t=l(n);return t.mythicCards.sort(r),t.rareCards.sort(r),t.uncommonCards.sort(r),t.commonCards.sort(r),i.when(t)}function r(n,t){return n.Number<t.Number?-1:n.Number>t.Number?1:0}function at(n){var t=it();return f(n,t)}function vt(n){var t=nt();return f(n,t)}function yt(n){var t=g();return f(n,t)}function pt(n){var t=d();return f(n,t)}function wt(n){for(var r,s,h=k(),i=f(n,h),u=0;u<n;u++)if(Math.random()<1)if(Math.random()<1/22){var e=[229,232,238,247,248],c=Math.round(Math.random()*(e.length-1)),l=KTK[e[c]];i.rareCards.push(l)}else{var o=[228,230,231,234,239,241,242,243,245,246],a=Math.round(Math.random()*(o.length-1)),v=KTK[o[a]];i.commonCards.push(v)}else r=t.getLandCards(),s=Math.round(Math.random()*(r.length-1)),i.commonCards.push(r[s]);return i}function bt(n){var t=b(),i=f(n,t);return c(DTK,i,n,!0,1/6)}function c(n,t,i,r,u){for(var f,e=0;e<i;e++)Math.random()<u&&(r&&t.commonCards.pop(),f=new ft(n[Math.floor(Math.random()*n.length)]),f.isFoil=!0,f.Rarity=="C"?t.commonCards.push(f):f.Rarity=="U"?t.uncommonCards.push(f):f.Rarity=="R"?t.rareCards.push(f):f.Rarity=="M"&&t.mythicCards.push(f));return t}function kt(n){var t=a(),i=f(n,t);return c(ORI,i,n,!0,1/6)}function dt(n){var t=w(),i=f(n,t);return c(MM2,i,n,!1,1)}function f(n,t){for(var r,i=new s,u=0;u<n;u++)r=ni(t,i),i.mythicCards.push.apply(i.mythicCards,r.mythicCards),i.rareCards.push.apply(i.rareCards,r.rareCards),i.uncommonCards.push.apply(i.uncommonCards,r.uncommonCards),i.commonCards.push.apply(i.commonCards,r.commonCards);return i}function p(n,t){var i=a();return gt(1,i,t)}function gt(n,t,i){for(var u,r=new s,f=0;f<n;f++)u=ri(t,r,i),r.mythicCards.push.apply(r.mythicCards,u.mythicCards),r.rareCards.push.apply(r.rareCards,u.rareCards),r.uncommonCards.push.apply(r.uncommonCards,u.uncommonCards),r.commonCards.push.apply(r.commonCards,u.commonCards);return r}function l(n){var t=tt();return f(n,t)}function ni(n){var r=new s,h=!0,e,o,u,f,i,t;for(Math.random()>1/8&&(h=!1),e=10,o=3,u=0;u<e;u++)i=Math.round(Math.random()*(n.commonCards.length-1)),t=n.commonCards[i],t!=null&&(f=!1,$.each(r.commonCards,function(n,i){i.Number==t.Number&&(f=!0)}),f&&n.commonCards.length>e?u--:r.commonCards.push(t));for(u=0;u<o;u++)i=Math.round(Math.random()*(n.uncommonCards.length-1)),t=n.uncommonCards[i],t!=null&&(f=!1,$.each(r.uncommonCards,function(n,i){i.Number==t.Number&&(f=!0)}),f?o++:r.uncommonCards.push(t));return h?(i=Math.round(Math.random()*(n.mythicCards.length-1)),t=n.mythicCards[i],r.mythicCards.push(t)):(i=Math.round(Math.random()*(n.rareCards.length-1)),t=n.rareCards[i],r.rareCards.push(t)),r}function h(n,t,i){var r=[],u=rt(t)+1;return $.each(n,function(n,f){(f.Number!=u&&f.Type[0]!="P"&&f.Color.indexOf(t)!=-1&&f.Color.length==1||i>0&&Math.random()<i)&&r.push(f)}),console.log(r),r}function ri(n,t,i){var r=new s,l,a,e,o,f;r.commonCards=h(n.commonCards,i,0);r.uncommonCards=h(n.uncommonCards,i,0);r.rareCards=h(n.rareCards,i,0);r.mythicCards=h(n.mythicCards,i,0);var u=new s,v=!0;for(Math.random()>1/8&&(v=!1),l=10,a=3,e=0;e<l;e++){var o=Math.round(Math.random()*(r.commonCards.length-1)),f=r.commonCards[o],c=!1;$.each(u.commonCards,function(n,t){t.Number==f.Number&&(c=!0)});c&&r.commonCards.length>l?e--:u.commonCards.push(f)}for(e=0;e<a;e++){var o=Math.round(Math.random()*(r.uncommonCards.length-1)),f=r.uncommonCards[o],c=!1;$.each(u.uncommonCards,function(n,t){t.Number==f.Number&&(c=!0)});c?a++:u.uncommonCards.push(f)}return v?(o=Math.round(Math.random()*(r.mythicCards.length-1)),f=r.mythicCards[o],u.mythicCards.push(f)):(o=Math.round(Math.random()*(r.rareCards.length-1)),f=r.rareCards[o],u.rareCards.push(f)),console.log(u),u}function s(){this.mythicCards=[];this.rareCards=[];this.uncommonCards=[];this.commonCards=[]}function ui(){return i.when(w())}function w(){return e(MM2)}function fi(){return i.when(b())}function b(){return e(DTK)}function ei(){return i.when(k())}function k(){return e(FRF)}function oi(){return i.when(d())}function d(){return e(KTK)}function si(){return i.when(g())}function g(){return e(M15)}function nt(){return e(THS)}function tt(){return e(BNG)}function it(){return e(JOU)}function a(){return e(ORI)}function e(n){var t=new s;return n.forEach(function(n){n.Rarity=="C"?t.commonCards.push(n):n.Rarity=="U"?t.uncommonCards.push(n):n.Rarity=="R"?t.rareCards.push(n):n.Rarity=="M"&&t.mythicCards.push(n)}),t}function hi(){return i.when(a())}function ci(){return i.when(it())}function li(){return i.when(nt())}function ai(){return i.when(tt())}function vi(){return i.when(BNG)}function yi(){return THS}function pi(){return BNG}function wi(){return JOU}function bi(){return M15}var i=n.$q,ut={openBoosters:st,getAllCards:vi,getAllCardsByRarity:ai,getAllMM2CardsByRarity:ui,getAllFRFCardsByRarity:ei,getAllKTKCardsByRarity:oi,getAllDTKCardsByRarity:fi,getAllM15CardsByRarity:si,getAllTHSCardsByRarity:li,getAllJOUCardsByRarity:ci,getAllORICardsByRarity:hi,setDisplayCard:et,getDisplayCard:ot,openXCardBoostersForLatestSet:p,openSortedBoosters:lt,openMixtureOfSortedBoosters:ct,openMixtureOfSeededBoosters:ht,getAllSet1CardsNoDelay:yi,getAllSet2CardsNoDelay:pi,getAllSet3CardsNoDelay:wi,getAllCoreSetCardsNoDelay:bi},v;return ut}angular.module("app").factory("datacontext",["common","landcards",n])})();
//# sourceMappingURL=datacontext.min.js.map
