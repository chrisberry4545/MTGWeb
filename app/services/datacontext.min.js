(function(){"use strict";function n(n,t){function ut(){return-1}function et(n){this.Name=n.Name;this.Cost=n.Cost;this.Color=n.Color;this.Rarity=n.Rarity;this.Type=n.Type;this.Rating=n.Rating;this.Sort=n.Sort;this.Set=n.Set;this.Number=n.Number;this.Image=n.Image}function ot(n){v=n}function st(){return v}function ht(n){return i.when(l(n))}function ct(n,t,u,f,e,o,s,h,c,l,a){var w=y(n,t,u,f,e,o,s,h,c,l-1,0),v=p(1,a);return v.rareCards.sort(r),v.uncommonCards.sort(r),v.commonCards.sort(r),v.mythicCards.push.apply(v.mythicCards,w.mythicCards),v.rareCards.push.apply(v.rareCards,w.rareCards),v.uncommonCards.push.apply(v.uncommonCards,w.uncommonCards),v.commonCards.push.apply(v.commonCards,w.commonCards),i.when(v)}function lt(n,t,r,u,f,e,o,s,h,c){var l=y(n,t,r,u,f,e,o,s,h,c);return i.when(l)}function y(n,t,i,r,f,e,s,h,c,a){var v=l(t),y,p,w,b,k,d,g,nt,tt;return u(v),y=yt(n),u(y),p=vt(i),u(p),w=pt(r),u(w),b=wt(f),u(b),k=bt(e),u(k),d=kt(s),u(d),g=ni(h),u(g),nt=gt(c),u(nt),console.log("num bfz"+a),tt=dt(a),u(tt),o(v,y),o(v,p),o(v,w),o(v,b),o(v,k),o(v,d),o(v,g),o(v,nt),o(v,tt),v}function u(n){n.mythicCards.sort(r);n.rareCards.sort(r);n.uncommonCards.sort(r);n.commonCards.sort(r)}function o(n,t){n.mythicCards.push.apply(n.mythicCards,t.mythicCards);n.rareCards.push.apply(n.rareCards,t.rareCards);n.uncommonCards.push.apply(n.uncommonCards,t.uncommonCards);n.commonCards.push.apply(n.commonCards,t.commonCards)}function at(n){var t=l(n);return t.mythicCards.sort(r),t.rareCards.sort(r),t.uncommonCards.sort(r),t.commonCards.sort(r),i.when(t)}function r(n,t){return n.Number<t.Number?-1:n.Number>t.Number?1:0}function vt(n){var t=it();return f(n,t)}function yt(n){var t=nt();return f(n,t)}function pt(n){var t=g();return f(n,t)}function wt(n){var t=d();return f(n,t)}function bt(n){for(var r,s,h=k(),i=f(n,h),u=0;u<n;u++)if(Math.random()<1)if(Math.random()<1/22){var e=[229,232,238,247,248],c=Math.round(Math.random()*(e.length-1)),l=KTK[e[c]];i.rareCards.push(l)}else{var o=[228,230,231,234,239,241,242,243,245,246],a=Math.round(Math.random()*(o.length-1)),v=KTK[o[a]];i.commonCards.push(v)}else r=t.getLandCards(),s=Math.round(Math.random()*(r.length-1)),i.commonCards.push(r[s]);return i}function kt(n){var t=b(),i=f(n,t);return h(DTK,i,n,!0,1/6)}function h(n,t,i,r,u){for(var f,e=0;e<i;e++)Math.random()<u&&(r&&t.commonCards.pop(),f=new et(n[Math.floor(Math.random()*n.length)]),f.isFoil=!0,f.Rarity=="C"?t.commonCards.push(f):f.Rarity=="U"?t.uncommonCards.push(f):f.Rarity=="R"?t.rareCards.push(f):f.Rarity=="M"&&t.mythicCards.push(f));return t}function dt(n){var t=a(),i=f(n,t);return h(BFZ,i,n,!0,1/6)}function gt(n){var t=rt(),i=f(n,t);return h(ORI,i,n,!0,1/6)}function ni(n){var t=w(),i=f(n,t);return h(MM2,i,n,!1,1)}function f(n,t){for(var r,i=new s,u=0;u<n;u++)r=ii(t,i),i.mythicCards.push.apply(i.mythicCards,r.mythicCards),i.rareCards.push.apply(i.rareCards,r.rareCards),i.uncommonCards.push.apply(i.uncommonCards,r.uncommonCards),i.commonCards.push.apply(i.commonCards,r.commonCards);return i}function p(n,t){var i=a();return ti(1,i,t)}function ti(n,t,i){for(var u,r=new s,f=0;f<n;f++)u=fi(t,r,i),r.mythicCards.push.apply(r.mythicCards,u.mythicCards),r.rareCards.push.apply(r.rareCards,u.rareCards),r.uncommonCards.push.apply(r.uncommonCards,u.uncommonCards),r.commonCards.push.apply(r.commonCards,u.commonCards);return r}function l(n){var t=tt();return f(n,t)}function ii(n){var r=new s,h=!0,e,o,u,f,i,t;for(Math.random()>1/8&&(h=!1),e=10,o=3,u=0;u<e;u++)i=Math.round(Math.random()*(n.commonCards.length-1)),t=n.commonCards[i],t!=null&&(f=!1,$.each(r.commonCards,function(n,i){i.Number==t.Number&&(f=!0)}),f&&n.commonCards.length>e?u--:r.commonCards.push(t));for(u=0;u<o;u++)i=Math.round(Math.random()*(n.uncommonCards.length-1)),t=n.uncommonCards[i],t!=null&&(f=!1,$.each(r.uncommonCards,function(n,i){i.Number==t.Number&&(f=!0)}),f?o++:r.uncommonCards.push(t));return h?(i=Math.round(Math.random()*(n.mythicCards.length-1)),t=n.mythicCards[i],r.mythicCards.push(t)):(i=Math.round(Math.random()*(n.rareCards.length-1)),t=n.rareCards[i],r.rareCards.push(t)),r}function c(n,t,i){var r=[],u=ut(t)+1;return $.each(n,function(n,f){(f.Number!=u&&f.Type[0]!="P"&&f.Color.indexOf(t)!=-1&&f.Color.length==1||i>0&&Math.random()<i)&&r.push(f)}),console.log(r),r}function fi(n,t,i){var r=new s,l,a,e,o,f;r.commonCards=c(n.commonCards,i,0);r.uncommonCards=c(n.uncommonCards,i,0);r.rareCards=c(n.rareCards,i,0);r.mythicCards=c(n.mythicCards,i,0);var u=new s,v=!0;for(Math.random()>1/8&&(v=!1),l=10,a=3,e=0;e<l;e++){var o=Math.round(Math.random()*(r.commonCards.length-1)),f=r.commonCards[o],h=!1;$.each(u.commonCards,function(n,t){t.Number==f.Number&&(h=!0)});h&&r.commonCards.length>l?e--:u.commonCards.push(f)}for(e=0;e<a;e++){var o=Math.round(Math.random()*(r.uncommonCards.length-1)),f=r.uncommonCards[o],h=!1;$.each(u.uncommonCards,function(n,t){t.Number==f.Number&&(h=!0)});h?a++:u.uncommonCards.push(f)}return v?(o=Math.round(Math.random()*(r.mythicCards.length-1)),f=r.mythicCards[o],u.mythicCards.push(f)):(o=Math.round(Math.random()*(r.rareCards.length-1)),f=r.rareCards[o],u.rareCards.push(f)),console.log(u),u}function s(){this.mythicCards=[];this.rareCards=[];this.uncommonCards=[];this.commonCards=[]}function ei(){return i.when(w())}function w(){return e(MM2)}function oi(){return i.when(b())}function b(){return e(DTK)}function si(){return i.when(k())}function k(){return e(FRF)}function hi(){return i.when(d())}function d(){return e(KTK)}function ci(){return i.when(g())}function g(){return e(M15)}function nt(){return e(THS)}function tt(){return e(BNG)}function it(){return e(JOU)}function rt(){return e(ORI)}function a(){return e(BFZ)}function e(n){var t=new s;return n.forEach(function(n){n.Rarity=="C"?t.commonCards.push(n):n.Rarity=="U"?t.uncommonCards.push(n):n.Rarity=="R"?t.rareCards.push(n):n.Rarity=="M"&&t.mythicCards.push(n)}),t}function li(){return i.when(a())}function ai(){return i.when(rt())}function vi(){return i.when(it())}function yi(){return i.when(nt())}function pi(){return i.when(tt())}function wi(){return i.when(BNG)}function bi(){return THS}function ki(){return BNG}function di(){return JOU}function gi(){return M15}var i=n.$q,ft={openBoosters:ht,getAllCards:wi,getAllCardsByRarity:pi,getAllMM2CardsByRarity:ei,getAllFRFCardsByRarity:si,getAllKTKCardsByRarity:hi,getAllDTKCardsByRarity:oi,getAllM15CardsByRarity:ci,getAllTHSCardsByRarity:yi,getAllJOUCardsByRarity:vi,getAllORICardsByRarity:ai,getAllBFZCardsByRarity:li,setDisplayCard:ot,getDisplayCard:st,openXCardBoostersForLatestSet:p,openSortedBoosters:at,openMixtureOfSortedBoosters:lt,openMixtureOfSeededBoosters:ct,getAllSet1CardsNoDelay:bi,getAllSet2CardsNoDelay:ki,getAllSet3CardsNoDelay:di,getAllCoreSetCardsNoDelay:gi},v;return ft}angular.module("app").factory("datacontext",["common","landcards",n])})();
//# sourceMappingURL=datacontext.min.js.map
